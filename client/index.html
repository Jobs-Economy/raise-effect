<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="content-type" content="text/html; charset=UTF8">
    <title>Jobs Economy</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.js"></script>
    <script type="text/javascript" src="./fixtures/selfsufficiency.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./styles/main.css">
  </head>

  <body>

    <script>

    var width = 420,
        barHeight = 20;


    //TODO: make scaling dynamic
    var x = d3.scale.linear()
        .domain([0, 1124])
        .range([0, width]);

    for (var key in monthlyCosts) {
      var data = d3.values(monthlyCosts[key].costs)

      var container = d3.select('body').append('div').attr('class', 'svg-container');

      container.append('p').text(monthlyCosts[key].title);

      var svg = container.append('svg').attr('class', 'chart ' + key);

      var chart = d3.select('.' + key)
          .attr("width", width)
          .attr("height", barHeight * data.length);

      var bar = chart.selectAll("g")
          .data(data)
        .enter().append("g")
          .attr("transform", function(d, i) { return "translate(0," + i * barHeight + ")"; });

      bar.append("rect")
          .attr("width", x)
          .attr("height", barHeight - 1);

      bar.append("text")
          .attr("x", function(d) { return x(d) - 3; })
          .attr("y", barHeight / 2)
          .attr("dy", ".35em")
          .text(function(d) { return d; });
    }

    </script>


  </body>
</html>